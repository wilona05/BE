{"mappings":"ACyCA,eAAe,kBACX,GAAI,CACA,IAAM,EAAM,MAAM,MAAM,mBAElB,EAAO,MAAM,EAAI,IAAI,GAG3B,GAAI,CAAC,GAAQ,CAAC,EAAK,OAAO,CAAE,CACxB,SAAS,aAAa,CAAC,qBAAqB,KAAK,CAAC,OAAO,CAAG,OAC5D,MACJ,CAGA,qBAAuB,EAAK,YAAY,CAGxC,SAAS,aAAa,CAAC,2BAA2B,SAAS,CAAG;AACxB,8CAAA,EAAE,EAAK,OAAO,CAAC;AACb,gDAAA,EAAE,EAAK,QAAQ,CAAC;AAChB,gDAAA,EAAE,EAAK,MAAM,CAAC;AACtD,QAAA,CAAC,CAGD,AAD0B,SAAS,aAAa,CAAC,gBAC/B,QAAQ,CAAG,CAAA,CACjC,CAAE,MAAO,EAAK,CACV,QAAQ,KAAK,CAAC,6BAA8B,EAChD,CACJ,CAEA,eAAe,WACX,GAAI,CACA,IAAM,EAAM,MAAM,MAAM,cAClB,EAAO,MAAM,EAAI,IAAI,GAErB,EAAY,SAAS,aAAa,CAAC,aACzC,CAAA,EAAU,SAAS,CAAG,GAEtB,EAAK,OAAO,CAAC,AAAA,IACT,IAAM,EAAW,AAAgB,IAAhB,EAAE,SAAS,CAAS,WAAa,GAC5C,EAAc,AAAgB,IAAhB,EAAE,SAAS,CAAS,cAAgB,EAExD,CAAA,EAAU,SAAS,EAAI;AACM,yCAAA,EAAE,EAAY;AACI,2DAAA,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,EAAS;AAC7C,uCAAA,EAAE,EAAE,OAAO,CAAC;A;AAEvC,YAAA,CAAC,AACL,EACJ,CAAE,MAAO,EAAK,CACV,QAAQ,KAAK,CAAC,wBAAyB,EAC3C,CACJ,CA3FA,SAAS,aAAa,CAAC,iBAAiB,gBAAgB,CAAC,QAAS,SAAS,CAAC,EACxE,EAAE,cAAc,GAChB,SAAS,aAAa,CAAC,eAAe,KAAK,CAAC,OAAO,CAAG,MAC1D,GAGA,SAAS,aAAa,CAAC,gBAAgB,gBAAgB,CAAC,QAAS,WAC7D,SAAS,aAAa,CAAC,eAAe,KAAK,CAAC,OAAO,CAAG,MAC1D,GAGA,SAAS,aAAa,CAAC,aAAa,gBAAgB,CAAC,QAAS,iBAErD,uBAGL,MAAM,MAAM,mBAAoB,CAC5B,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,aAAc,oBAAqB,EAC9D,GAGA,SAAS,aAAa,CAAC,eAAe,KAAK,CAAC,OAAO,CAAG,OAGtD,SAAS,MAAM,GACnB,GAGA,SAAS,aAAa,CAAC,QAAQ,gBAAgB,CAAC,SAAU,SAAS,CAAC,EAC/C,SAAS,aAAa,CAAC,gCAGpC,EAAE,cAAc,GAChB,MAAM,uCAEd,GAyDA,OAAO,gBAAgB,CAAC,mBAAoB,KACxC,kBACA,UACJ","sources":["<anon>","script/homepage_user.js"],"sourcesContent":["// Buka pop up konfirmasi membatalkan reservasi\ndocument.querySelector(\".batal button\").addEventListener(\"click\", function(e) {\n    e.preventDefault();\n    document.querySelector(\".popUpBatal\").style.display = \"flex\";\n});\n// Close pop up (Tidak membatalkan reservasi)\ndocument.querySelector(\".buttonTidak\").addEventListener(\"click\", function() {\n    document.querySelector(\".popUpBatal\").style.display = \"none\";\n});\n// Batalkan reservasi\ndocument.querySelector(\".buttonYa\").addEventListener(\"click\", async function() {\n    // Jika sekarang tidak ada reservasi, tidak melakukan apa-apa\n    if (!currentReservationId) return;\n    // Membatalkan reservasi dengan id reservasi ini\n    await fetch(\"/batal-reservasi\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            id_reservasi: currentReservationId\n        })\n    });\n    //Tutup pop up\n    document.querySelector(\".popUpBatal\").style.display = \"none\";\n    //Reload halaman untuk menampilkan data yang baru\n    location.reload();\n});\n//pastikan meja sudah dipilih sebelum konfirmasi reservasi\ndocument.querySelector(\"form\").addEventListener(\"submit\", function(e) {\n    const selected = document.querySelector(\"input[name='meja']:checked\");\n    if (!selected) {\n        e.preventDefault(); // cegah submit\n        alert(\"Silakan pilih meja terlebih dahulu!\");\n    }\n});\n//Load reservasi dari server\nasync function loadReservation() {\n    try {\n        const res = await fetch(\"/reservasi-user\");\n        const data = await res.json();\n        // Kalau tidak ada reservasi aktif, hide card ini\n        if (!data || !data.no_meja) {\n            document.querySelector(\".reservasiDetails\").style.display = \"none\";\n            return;\n        }\n        // simpan id reservasi untuk fungsi pembatalan\n        currentReservationId = data.id_reservasi;\n        // Kalau ada reservasi, tampilkan datanya\n        document.querySelector(\".reservasiDetails .desc\").innerHTML = `\n            <div class=\"descLine\">Nomor Meja: ${data.no_meja}</div>\n            <div class=\"descLine\">Jumlah Orang: ${data.jmlh_org}</div>\n            <div class=\"descLine\">Nomor Kontak: ${data.kontak}</div>\n        `;\n        //Pastikan tidak bisa reservasi jika sudah memiliki reservasi yang aktif\n        const confirmReserveBtn = document.querySelector(\".confirm-btn\");\n        confirmReserveBtn.disabled = true;\n    } catch (err) {\n        console.error(\"Gagal load data reservasi:\", err);\n    }\n}\nasync function loadMeja() {\n    try {\n        const res = await fetch(\"/meja-list\");\n        const list = await res.json();\n        const container = document.querySelector(\".seatsList\");\n        container.innerHTML = \"\";\n        list.forEach((m)=>{\n            const disabled = m.available === 0 ? \"disabled\" : \"\";\n            const unavailable = m.available === 0 ? \"unavailable\" : \"\";\n            container.innerHTML += `\n                <label class=\"seatOption ${unavailable}\">\n                    <input type=\"radio\" name=\"meja\" value=\"${m.no_meja}\" ${disabled}>\n                    <span class=\"seat\">${m.no_meja}</span>\n                </label>\n            `;\n        });\n    } catch (err) {\n        console.error(\"Gagal load data meja:\", err);\n    }\n}\nwindow.addEventListener(\"DOMContentLoaded\", ()=>{\n    loadReservation(); //load kartu reservasi\n    loadMeja(); //load meja2 available & unavailable\n});\n\n//# sourceMappingURL=homepage_user.259831c3.js.map\n","// Buka pop up konfirmasi membatalkan reservasi\r\ndocument.querySelector(\".batal button\").addEventListener(\"click\", function(e) {\r\n    e.preventDefault();\r\n    document.querySelector(\".popUpBatal\").style.display = \"flex\";\r\n});\r\n\r\n// Close pop up (Tidak membatalkan reservasi)\r\ndocument.querySelector(\".buttonTidak\").addEventListener(\"click\", function() {\r\n    document.querySelector(\".popUpBatal\").style.display = \"none\";\r\n});\r\n\r\n// Batalkan reservasi\r\ndocument.querySelector(\".buttonYa\").addEventListener(\"click\", async function() {\r\n    // Jika sekarang tidak ada reservasi, tidak melakukan apa-apa\r\n    if (!currentReservationId) return;\r\n\r\n    // Membatalkan reservasi dengan id reservasi ini\r\n    await fetch(\"/batal-reservasi\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ id_reservasi: currentReservationId })\r\n    });\r\n\r\n    //Tutup pop up\r\n    document.querySelector(\".popUpBatal\").style.display = \"none\";\r\n\r\n    //Reload halaman untuk menampilkan data yang baru\r\n    location.reload();\r\n});\r\n\r\n//pastikan meja sudah dipilih sebelum konfirmasi reservasi\r\ndocument.querySelector(\"form\").addEventListener(\"submit\", function(e) {\r\n    const selected = document.querySelector(\"input[name='meja']:checked\");\r\n\r\n    if (!selected) {\r\n        e.preventDefault(); // cegah submit\r\n        alert(\"Silakan pilih meja terlebih dahulu!\");\r\n    }\r\n});\r\n\r\n//Load reservasi dari server\r\nasync function loadReservation() {\r\n    try {\r\n        const res = await fetch(\"/reservasi-user\");\r\n        \r\n        const data = await res.json();\r\n\r\n        // Kalau tidak ada reservasi aktif, hide card ini\r\n        if (!data || !data.no_meja) {\r\n            document.querySelector(\".reservasiDetails\").style.display = \"none\";\r\n            return;\r\n        }\r\n\r\n        // simpan id reservasi untuk fungsi pembatalan\r\n        currentReservationId = data.id_reservasi;\r\n\r\n        // Kalau ada reservasi, tampilkan datanya\r\n        document.querySelector(\".reservasiDetails .desc\").innerHTML = `\r\n            <div class=\"descLine\">Nomor Meja: ${data.no_meja}</div>\r\n            <div class=\"descLine\">Jumlah Orang: ${data.jmlh_org}</div>\r\n            <div class=\"descLine\">Nomor Kontak: ${data.kontak}</div>\r\n        `;\r\n        //Pastikan tidak bisa reservasi jika sudah memiliki reservasi yang aktif\r\n        const confirmReserveBtn = document.querySelector(\".confirm-btn\");\r\n        confirmReserveBtn.disabled = true;\r\n    } catch (err) {\r\n        console.error(\"Gagal load data reservasi:\", err);\r\n    }\r\n}\r\n\r\nasync function loadMeja() {\r\n    try {\r\n        const res = await fetch(\"/meja-list\");\r\n        const list = await res.json();\r\n\r\n        const container = document.querySelector(\".seatsList\");\r\n        container.innerHTML = \"\";\r\n\r\n        list.forEach(m => {\r\n            const disabled = m.available === 0 ? \"disabled\" : \"\";\r\n            const unavailable = m.available === 0 ? \"unavailable\" : \"\";\r\n\r\n            container.innerHTML += `\r\n                <label class=\"seatOption ${unavailable}\">\r\n                    <input type=\"radio\" name=\"meja\" value=\"${m.no_meja}\" ${disabled}>\r\n                    <span class=\"seat\">${m.no_meja}</span>\r\n                </label>\r\n            `;\r\n        });\r\n    } catch (err) {\r\n        console.error(\"Gagal load data meja:\", err);\r\n    }\r\n}\r\n\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n    loadReservation();  //load kartu reservasi\r\n    loadMeja();         //load meja2 available & unavailable\r\n});"],"names":["loadReservation","res","fetch","data","json","no_meja","document","querySelector","style","display","currentReservationId","id_reservasi","innerHTML","jmlh_org","kontak","confirmReserveBtn","disabled","err","console","error","loadMeja","list","container","forEach","m","available","unavailable","addEventListener","e","preventDefault","method","headers","body","JSON","stringify","location","reload","alert","window"],"version":3,"file":"homepage_user.259831c3.js.map"}